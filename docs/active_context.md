# PomodoroFlow-Rs é¡¹ç›®çŠ¶æ€

**æœ€åŽæ›´æ–°**: 2025-12-23

## é¡¹ç›®æ¦‚è¿°

PomodoroFlow-Rs æ˜¯ä¸€ä¸ªåŸºäºŽ **Tauri + React + Rust** å¼€å‘çš„ç•ªèŒ„é’Ÿæ¡Œé¢åº”ç”¨ï¼Œæä¾›ä¸“æ³¨è®¡æ—¶å’Œæœ¬åœ°ä»»åŠ¡ç®¡ç†åŠŸèƒ½ã€‚

## æ ¸å¿ƒåŠŸèƒ½

## æœ€è¿‘æ›´æ–° (v0.2.0)

### ðŸŽ¨ UI é‡æž„ - iOS 18 è´¨æ„Ÿç•Œé¢ (2025-12-23)

**ç•Œé¢è®¾è®¡æ›´æ–°**ï¼š
- âœ¨ å…¨æ–°çš„ iOS 18 è´¨æ„Ÿè®¾è®¡ç³»ç»Ÿ
- ðŸ§Š æ¯›çŽ»ç’ƒå¡ç‰‡æ•ˆæžœï¼ˆbackdrop-filter: blur(40px)ï¼‰
- â­• åœ†çŽ¯è¿›åº¦æ¡åŠ¨ç”»ï¼Œ220px å¤§å°ºå¯¸ï¼Œ88px è¶…ç»†å­—ä½“
- ðŸ“± å·¦å³åŒå¡ç‰‡å¸ƒå±€ï¼šå·¦ä¾§ç•ªèŒ„é’Ÿï¼ˆå›ºå®š400pxï¼‰ï¼Œå³ä¾§ TodoListï¼ˆå¼¹æ€§å®½åº¦ï¼‰
- ðŸ”˜ æµ®åŠ¨è®¾ç½®æŒ‰é’®ï¼ˆå³ä¸Šè§’ 44x44ï¼‰ï¼Œç§»é™¤é¡¶éƒ¨ Header
- ðŸ“œ å³ä¾§åˆ—è¡¨å¡ç‰‡å†…æ»šåŠ¨ï¼Œä¸‰æ®µå¼æ ‡ç­¾é¡µå’Œè¾“å…¥æ¡†å›ºå®š

**å¸ƒå±€ä¼˜åŒ–**ï¼š
- é¡µé¢æ•´ä½“å›ºå®šä¸æ»šåŠ¨ï¼ˆoverflow: hiddenï¼‰
- å·¦å³å¡ç‰‡ç‹¬ç«‹ï¼Œé«˜åº¦è‡ªé€‚åº”ä¸€è‡´ï¼ˆalign-items: stretchï¼‰
- å³ä¾§ TodoListï¼šæ ‡ç­¾é¡µã€è¾“å…¥æ¡†å›ºå®šï¼Œåªæœ‰åˆ—è¡¨åŒºåŸŸæ»šåŠ¨
- å“åº”å¼è®¾è®¡ï¼š>1200px (1:1.5), 768-1200px (1:1), <768px (ä¸Šä¸‹å †å )

**æ–°å¢žæ–‡ä»¶**ï¼š
- `src/styles/iOS-theme.css` - iOS 18 è®¾è®¡ç³»ç»Ÿ
- `src/styles/iOS-layout.css` - å·¦å³å¸ƒå±€æ ·å¼
- `src/styles/PomodoroCard.css` - ç•ªèŒ„é’Ÿå¡ç‰‡æ ·å¼
- `src/styles/FloatingSettingsButton.css` - æµ®åŠ¨æŒ‰é’®æ ·å¼

**ç§»é™¤å†…å®¹**ï¼š
- é¡¶éƒ¨ Header ç»„ä»¶
- åº•éƒ¨ Footer çŠ¶æ€æ 
- æ•´ä½“é¡µé¢æ»šåŠ¨

### ðŸŽ¯ é‡å¤§ä¿®å¤ (v0.1.0)

**é—®é¢˜ 1: è®¾ç½®ä¿å­˜åŽä¸ç”Ÿæ•ˆ**
- **åŽŸå› **: `saveUserConfig` åªä¿å­˜åˆ°æ•°æ®åº“ï¼Œæ²¡æœ‰æ›´æ–°è¿è¡Œæ—¶ `PomodoroService`
- **ä¿®å¤**: æ·»åŠ  `update_pomodoro_config` æ–¹æ³•ï¼ŒçŽ°åœ¨ä¿å­˜é…ç½®åŽä¼šç«‹å³æ›´æ–°è®¡æ—¶å™¨é…ç½®

**é—®é¢˜ 2: æ–°åˆ›å»ºçš„ä»»åŠ¡æ€»æ˜¯å‡ºçŽ°åœ¨"å·²å®Œæˆ"æ ‡ç­¾**
- **æ ¹æœ¬åŽŸå› **: å¤šä¸ªbugç»„åˆå¯¼è‡´
  - å‰ç«¯åˆ›å»ºä»»åŠ¡æ—¶ç¡¬ç¼–ç  `status: "todo"`ï¼Œæ²¡æœ‰ä¼ é€’å½“å‰æ ‡ç­¾é¡µçŠ¶æ€
  - åŽç«¯è¿”å›žæ•°æ®æ—¶è¦†ç›–äº†å‰ç«¯è®¾ç½®çš„æ­£ç¡®çŠ¶æ€
  - å‰ç«¯è¿‡æ»¤é€»è¾‘ä¸­"done"æ ‡ç­¾é¡µè¿”å›ž truthy å­—ç¬¦ä¸²è€Œä¸æ˜¯å¸ƒå°”å€¼
  - åŽç«¯åºåˆ—åŒ–é—®é¢˜ï¼ˆ`TodoStatus` æžšä¸¾æ²¡æœ‰æ­£ç¡®çš„åºåˆ—åŒ–é…ç½®ï¼‰
- **ä¿®å¤**: 
  - å‰ç«¯çŽ°åœ¨ä¼ é€’ `activeTab` ä½œä¸º `initialStatus`
  - åŽç«¯æŽ¥å—å¯é€‰çš„ `status` å‚æ•°
  - å‰ç«¯å¼ºåˆ¶ä¿ç•™å‰ç«¯è®¾ç½®çš„çŠ¶æ€ä¸è¢«åŽç«¯è¦†ç›–
  - ä¸º `TodoStatus` å’Œ `Todo` æ·»åŠ  `#[serde(rename_all = "snake_case")]`
  - ä¿®å¤å‰ç«¯è¿‡æ»¤é€»è¾‘çš„å¸ƒå°”è¿”å›žå€¼é—®é¢˜

**å½“å‰è¡Œä¸º**:
- âœ… åœ¨"å¾…åŠž"æ ‡ç­¾åˆ›å»ºä»»åŠ¡ â†’ çŠ¶æ€ä¸º "todo" â†’ åªå‡ºçŽ°åœ¨"å¾…åŠž"æ ‡ç­¾
- âœ… åœ¨"è¿›è¡Œä¸­"æ ‡ç­¾åˆ›å»ºä»»åŠ¡ â†’ çŠ¶æ€ä¸º "in_progress" â†’ åªå‡ºçŽ°åœ¨"è¿›è¡Œä¸­"æ ‡ç­¾
- âœ… åœ¨"å·²å®Œæˆ"æ ‡ç­¾åˆ›å»ºä»»åŠ¡ â†’ çŠ¶æ€ä¸º "done" â†’ åªå‡ºçŽ°åœ¨"å·²å®Œæˆ"æ ‡ç­¾

### âœ… å·²å®žçŽ°

1. **ç•ªèŒ„é’Ÿæ¨¡å—**
   - å€’è®¡æ—¶æ˜¾ç¤ºï¼ˆMM:SS æ ¼å¼ï¼‰
   - ä¸‰ç§å‘¨æœŸï¼šå·¥ä½œ(25åˆ†é’Ÿ) / çŸ­ä¼‘æ¯(5åˆ†é’Ÿ) / é•¿ä¼‘æ¯(15åˆ†é’Ÿ)
   - å¼€å§‹/æš‚åœ/é‡ç½®/è·³è¿‡æŽ§åˆ¶
   - ç³»ç»Ÿé€šçŸ¥æé†’
   - å‘¨æœŸè‡ªåŠ¨åˆ‡æ¢
   - å¯é…ç½®æ—¶é•¿
   - **æ–°å¢žï¼šåœ†çŽ¯è¿›åº¦æ¡ï¼ˆSVGï¼‰ï¼ŒPhase é¢œè‰²æ¸å˜**
   - **æ–°å¢žï¼šå±…ä¸­å¸ƒå±€ï¼Œç»„ä»¶é—´è·ç»Ÿä¸€**
   - **ä¿®å¤ï¼šé…ç½®ä¿å­˜åŽç«‹å³ç”Ÿæ•ˆ**

2. **å¾…åŠžäº‹é¡¹æ¨¡å—**
   - åˆ›å»º/ç¼–è¾‘/åˆ é™¤ä»»åŠ¡
   - ä»»åŠ¡çŠ¶æ€ç®¡ç†ï¼ˆå¾…åŠž/è¿›è¡Œä¸­/å·²å®Œæˆï¼‰
   - ä»»åŠ¡æœç´¢å’Œç­›é€‰
   - æœ¬åœ° SQLite æ•°æ®æŒä¹…åŒ–
   - **iOS 18 åˆ†ç»„åˆ—è¡¨ï¼ˆInset Groupedï¼‰é£Žæ ¼**
   - **åˆ—è¡¨å†…å®¹åœ¨å¡ç‰‡å†…æ»šåŠ¨ï¼Œå¤´éƒ¨å›ºå®š**
   - **ä¸‰æ®µå¼æ ‡ç­¾é¡µï¼ˆå¾…åŠž/è¿›è¡Œä¸­/å·²å®Œæˆï¼‰**
   - **åœ¨å½“å‰æ ‡ç­¾é¡µåˆ›å»ºä»»åŠ¡ä¼šè‡ªåŠ¨è®¾ç½®å¯¹åº”çŠ¶æ€**

3. **ç”¨æˆ·é…ç½®**
   - ç•ªèŒ„é’Ÿæ—¶é•¿é…ç½®
   - ä¸»é¢˜åˆ‡æ¢ï¼ˆæµ…è‰²/æ·±è‰²/ç³»ç»Ÿï¼‰
   - é€šçŸ¥è®¾ç½®
   - é…ç½®æŒä¹…åŒ–
   - **iOS é£Žæ ¼è®¾ç½®é¢æ¿ï¼ˆæ¨¡æ€æ¡†ï¼‰**

4. **ç”¨æˆ·ç•Œé¢**
   - **iOS 18 Design System**
   - **å·¦å³åŒå¡ç‰‡å¸ƒå±€**
   - **æ¯›çŽ»ç’ƒæ•ˆæžœ**
   - **æµ®åŠ¨è®¾ç½®æŒ‰é’®**
   - å“åº”å¼è®¾è®¡
   - é”®ç›˜å¿«æ·é”®æ”¯æŒ
   - åŠ è½½çŠ¶æ€æŒ‡ç¤º
   - é”™è¯¯æç¤ºç³»ç»Ÿ

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æž¶**: React 18 + TypeScript
- **æž„å»º**: Vite
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ ·å¼**: iOS 18 Design System
  - å˜é‡ç³»ç»Ÿï¼š`--ios-bg-primary`, `--ios-text-primary` ç­‰
  - é¢œè‰²ï¼šéµå¾ª iOS 18 HIG è§„èŒƒ
  - åŠ¨ç”»æ›²çº¿ï¼š`--ios-spring`, `--ios-ease-out`
  - è¾¹æ¡†åŠå¾„ï¼š`--ios-radius-small/medium/large/xlarge`

### åŽç«¯
- **æ¡†æž¶**: Tauri 1.0+
- **è¯­è¨€**: Rust (2021 Edition)
- **æ•°æ®åº“**: SQLite (rusqlite)
- **å¼‚æ­¥**: Tokio

## é¡¹ç›®ç»“æž„

```
pomoflow-rs/
â”œâ”€â”€ src/                    # React å‰ç«¯
â”‚   â”œâ”€â”€ components/         # UI ç»„ä»¶
â”‚   â”œâ”€â”€ stores/            # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰é’©å­
â”‚   â””â”€â”€ styles/            # CSS æ ·å¼
â”œâ”€â”€ src-tauri/             # Tauri åŽç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs        # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ commands/      # Tauri å‘½ä»¤
â”‚   â””â”€â”€ Cargo.toml
â””â”€â”€ src/                   # Rust æ ¸å¿ƒåº“
    â”œâ”€â”€ core/              # ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ storage/           # æ•°æ®åº“å±‚
    â””â”€â”€ async_utils/       # å¼‚æ­¥å·¥å…·
```

## Tauri å‘½ä»¤ API

### ç•ªèŒ„é’Ÿå‘½ä»¤
- `start_pomodoro()` - å¯åŠ¨è®¡æ—¶
- `pause_pomodoro()` - æš‚åœè®¡æ—¶
- `reset_pomodoro()` - é‡ç½®è®¡æ—¶
- `skip_pomodoro_phase()` - è·³è¿‡å½“å‰é˜¶æ®µ
- `get_pomodoro_session()` - èŽ·å–å½“å‰ä¼šè¯
- `update_pomodoro_config(config)` - æ›´æ–°é…ç½®

### å¾…åŠžäº‹é¡¹å‘½ä»¤
- `get_todos()` - èŽ·å–æ‰€æœ‰ä»»åŠ¡
- `create_todo(title, description, status)` - åˆ›å»ºä»»åŠ¡ï¼ˆå¯æŒ‡å®šåˆå§‹çŠ¶æ€ï¼‰
- `update_todo(id, updates)` - æ›´æ–°ä»»åŠ¡
- `delete_todo(id)` - åˆ é™¤ä»»åŠ¡
- `toggle_todo_status(id)` - åˆ‡æ¢çŠ¶æ€
- `get_todo_stats()` - èŽ·å–ç»Ÿè®¡

### é…ç½®å‘½ä»¤
- `get_user_config()` - èŽ·å–ç”¨æˆ·é…ç½®
- `save_user_config(config)` - ä¿å­˜é…ç½®

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨

**todos** - å¾…åŠžäº‹é¡¹
```sql
CREATE TABLE todos (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    status TEXT NOT NULL,
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP NOT NULL
);
```

**user_config** - ç”¨æˆ·é…ç½®
```sql
CREATE TABLE user_config (
    id INTEGER PRIMARY KEY CHECK (id = 1),
    pomodoro_work_duration INTEGER DEFAULT 1500,
    pomodoro_short_break_duration INTEGER DEFAULT 300,
    pomodoro_long_break_duration INTEGER DEFAULT 900,
    pomodoro_cycles_until_long_break INTEGER DEFAULT 4,
    notifications_enabled BOOLEAN DEFAULT 1,
    sound_enabled BOOLEAN DEFAULT 1,
    theme TEXT DEFAULT 'light'
);
```

**pomodoro_sessions** - ç•ªèŒ„é’Ÿä¼šè¯è®°å½•
```sql
CREATE TABLE pomodoro_sessions (
    id INTEGER PRIMARY KEY,
    phase TEXT NOT NULL,
    duration_seconds INTEGER NOT NULL,
    completed_at TIMESTAMP NOT NULL,
    cycle_count INTEGER NOT NULL
);
```

## æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**: < 5 ç§’
- **å†…å­˜å ç”¨**: < 150 MB
- **UI å“åº”**: < 100ms
- **æ•°æ®åº“æ“ä½œ**: < 10ms

## å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run tauri:dev

# æž„å»ºå‰ç«¯
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# Tauri æž„å»º
npm run tauri build
```

## å·²çŸ¥é—®é¢˜

æ— å…³é”®é—®é¢˜ã€‚åº”ç”¨åŠŸèƒ½å®Œæ•´ï¼Œæ€§èƒ½ç¨³å®šã€‚

## æœªæ¥è®¡åˆ’

- [ ] ç•ªèŒ„é’Ÿç»Ÿè®¡é¡µé¢
- [ ] ä»»åŠ¡ä¼˜å…ˆçº§å’Œæ ‡ç­¾
- [ ] æ•°æ®å¯¼å…¥/å¯¼å‡º
- [ ] è‡ªå®šä¹‰é€šçŸ¥éŸ³æ•ˆ
